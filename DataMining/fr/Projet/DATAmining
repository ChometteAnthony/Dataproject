import json
import os
from PIL import Image

# Créer un dossier appelé "images" (s'il n'existe pas déjà)
os.mkdir("images")

# Récupérer la liste des fichiers dans le dossier "input_images"
image_files = os.listdir("input_images")

# Parcourir chaque fichier dans la liste
for file in image_files:
    # Vérifier si le fichier est une image
    if file.endswith((".jpg", ".png", ".jpeg")):
        # Ouvrir l'image avec le module PIL
        im = Image.open(f'input_images/{file}')

        # Enregistrer les métadonnées de l'image dans un dictionnaire
        metadata = {
            'size': im.size,
            'format': im.format,
            'orientation': im.mode,
            'date_creation': '2023-04-04',  # mettre ici la date de création réelle de l'image
            # mettre ici le modèle de l'appareil photo réel
            'model_appareil': 'Canon EOS 5D Mark IV'
        }

        # Enregistrer les métadonnées dans un fichier JSON nommé d'après le nom du fichier
        with open(f'metadata_{file}.json', 'w') as f:
            json.dump([metadata], f)

        # Enregistrer l'image dans le dossier "images"
        im.save(f'images/{file}')
